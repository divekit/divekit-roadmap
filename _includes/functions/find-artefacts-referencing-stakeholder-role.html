{% assign stakeholderRole = include.myStakeholderRole %}
{% assign type = include.myType %}
{% assign refsAsList = include.refsAsList %}
{% assign collection = include.myCollection %}
{% assign withID = include.withID %}

{% if refsAsList %}
    {% assign whereExpString = "item.stakeholderRole contains '"|
                append: stakeholderRole.acronym | append: "'" %}
    {% assign itemList = collection | where_exp: "item", whereExpString %}
{% else %}
    {% assign stakeholderRoleAcronym = stakeholderRole.acronym
    {% assign itemList = collection | where: "stakeholderRole", stakeholderRoleAcronym %}
{% endif %}

{% assign linkList = "" | split: ";" %}
{% assign acronymList = "" | split: ";" %}
{% assign sortField = site.data.metadata[type].sortField %}
{% for item in itemList %}
    {% assign acronymList = acronymList | push: item.acronym %}
    {% assign itemName = item[sortField] %}
    {% if withID %}
        {% include /functions/get-globalid.html myCollection=collection myArtefact=item myType=type %}
        {% assign itemName = globalId | append: " " | append: itemName %}
    {% endif %}
    {% capture link %}<a href="{{ site.url }}{{ item.url | relative_url }}">{{ itemName }}</a>{% endcapture %}
    {% assign linkList = linkList | push: link %}
{% endfor %}

{% assign linksString = linkList | join: ";" %}
{% assign acronymString = acronymList | join: ";" %}
